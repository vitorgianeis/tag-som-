<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tag Som e Luz - Sistema Integrado</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #AE2D68;
            --primary-dark: #AE2D68;
            --dark: #121212;
            --gray: #8e8e8e;
            --light-gray: #dbdbdb;
            --white: #ffffff;
            --bg: #fafafa;
            --cinza-escuro: #333;
            --cinza-claro: #f5f5f5;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #F44336;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Layout Principal */
        .app-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 250px;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 107, 0, 0.3);
            padding: 20px 0;
            transition: all 0.3s;
            position: fixed;
            height: 100vh;
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .sidebar-logo {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .sidebar-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #AE2D68, #FF9E00);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 1.2rem;
            color: white;
        }
        
        .sidebar-logo h1 {
            font-size: 1.4rem;
            background: linear-gradient(to right, #AE2D68, #ffffff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
            font-weight: 700;
        }
        
        .nav-menu {
            list-style: none;
            padding: 0 15px;
        }
        
        .nav-item {
            margin-bottom: 5px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-radius: 8px;
            color: var(--gray);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .nav-link i {
            margin-right: 12px;
            font-size: 1.1rem;
            width: 24px;
            text-align: center;
        }
        
        .nav-link:hover {
            background: rgba(255, 107, 0, 0.1);
            color: var(--white);
        }
        
        .nav-link.active {
            background: rgba(255, 107, 0, 0.2);
            color: var(--primary);
            font-weight: 600;
        }
        
        /* Conteúdo Principal */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 20px;
        }
        
        /* Header */
        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 107, 0, 0.2);
        }
        
        .page-title {
            font-size: 1.6rem;
            font-weight: 600;
            background: linear-gradient(to right, #AE2D68, #FF9E00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #AE2D68, #FF9E00);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 12px;
        }
        
        .user-name {
            font-weight: 500;
            margin-right: 15px;
        }
        
        .logout-btn {
            background: rgba(255, 107, 0, 0.2);
            color: var(--primary);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .logout-btn:hover {
            background: rgba(255, 107, 0, 0.3);
        }
        
        /* Páginas */
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Dashboard */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(30, 30, 30, 0.7);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            border-left: 4px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(to right, #AE2D68, #FF9E00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 10px 0;
        }
        
        .stat-label {
            color: var(--gray);
            font-size: 1rem;
        }
        
        /* Login Page */
        .login-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .background-effects {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .light-beam {
            position: absolute;
            width: 150%;
            height: 200px;
            background: linear-gradient(90deg, transparent, rgba(255, 107, 0, 0.15), transparent);
            transform: rotate(-20deg);
            animation: beamMovement 20s linear infinite;
        }
        
        .light-beam:nth-child(2) {
            top: 30%;
            animation-delay: -5s;
            opacity: 0.7;
        }
        
        .light-beam:nth-child(3) {
            top: 60%;
            animation-delay: -10s;
            opacity: 0.5;
        }
        
        @keyframes beamMovement {
            0% {
                left: -100%;
            }
            100% {
                left: 100%;
            }
        }
        
        .logo-header {
            text-align: center;
            padding: 25px 0;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(10px);
            position: absolute;
            top: 0;
            width: 100%;
            z-index: 10;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.5);
        }
        
        .logo-header h1 {
            font-size: 2.8rem;
            background: linear-gradient(to right, #FF6B00, #FF9E00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .logo-header p {
            color: var(--gray);
            font-size: 1.1rem;
        }
        
        .main-container {
            display: flex;
            max-width: 1200px;
            width: 100%;
            margin-top: 100px;
        }
        
        .banner-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            height: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            background: linear-gradient(45deg, #1a1a1a 0%, #0d0d0d 100%);
            border: 1px solid rgba(255, 107, 0, 0.2);
        }
        
        .banner-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 30px;
            width: 100%;
        }
        
        .banner-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, #FF6B00, #FF9E00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
        }
        
        .features {
            text-align: left;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .feature {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(30, 30, 30, 0.6);
            border-radius: 10px;
            border-left: 3px solid var(--primary);
            transition: transform 0.3s, background 0.3s;
        }
        
        .feature:hover {
            transform: translateX(10px);
            background: rgba(40, 40, 40, 0.8);
        }
        
        .feature i {
            font-size: 1.8rem;
            color: var(--primary);
            margin-right: 15px;
            min-width: 40px;
        }
        
        .feature-text h3 {
            font-size: 1.3rem;
            margin-bottom: 5px;
            color: var(--white);
        }
        
        .feature-text p {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .form-container {
            flex: 0 0 400px;
            margin-left: 40px;
        }
        
        .form-box {
            background: rgba(20, 20, 20, 0.9);
            border: 1px solid rgba(255, 107, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .form-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255, 107, 0, 0.2);
        }
        
        .form-logo {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #FF6B00, #FF9E00);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 2.5rem;
            color: white;
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.4);
        }
        
        .form-logo i {
            transform: rotate(-10deg);
        }
        
        #login-form {
            margin-bottom: 25px;
        }
        
        .input-group {
            position: relative;
            margin-bottom: 20px;
        }
        
        .input-group input {
            width: 100%;
            padding: 14px 20px 14px 50px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: rgba(30, 30, 30, 0.7);
            color: var(--white);
            font-size: 0.95rem;
            transition: all 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(40, 40, 40, 0.8);
            box-shadow: 0 0 0 3px rgba(255, 107, 0, 0.2);
        }
        
        .input-group i {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-size: 1.1rem;
        }
        
        .input-group input:focus + i {
            color: var(--primary);
        }
        
        #login-form input[type="submit"] {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #FF6B00, #FF9E00);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.4);
        }
        
        #login-form input[type="submit"]:hover {
            background: linear-gradient(135deg, #E05E00, #FF8C00);
            box-shadow: 0 7px 20px rgba(255, 107, 0, 0.6);
            transform: translateY(-2px);
        }
        
        .separator {
            display: flex;
            align-items: center;
            margin: 25px 0;
        }
        
        .separator .line {
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        }
        
        .separator span {
            color: var(--gray);
            font-size: 0.9rem;
            margin: 0 15px;
            text-transform: uppercase;
            font-weight: 500;
        }
        
        .social-login {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 12px;
            margin-bottom: 12px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            text-decoration: none;
        }
        
        .facebook-btn {
            background: #1877F2;
            box-shadow: 0 4px 10px rgba(24, 119, 242, 0.3);
        }
        
        .google-btn {
            background: #ffffff;
            color: #333;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .social-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(24, 119, 242, 0.4);
        }
        
        .social-btn i {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .forgot-pass {
            text-align: center;
            margin-top: 15px;
        }
        
        .forgot-pass a {
            color: var(--primary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s;
        }
        
        .forgot-pass a:hover {
            color: #FF9E00;
            text-decoration: underline;
        }
        
        .register-box {
            background: rgba(20, 20, 20, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        .register-box p {
            color: var(--gray);
            font-size: 0.95rem;
        }
        
        .register-box a {
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .register-box a:hover {
            color: #FF9E00;
            text-decoration: underline;
        }
        
        .download-app {
            text-align: center;
        }
        
        .download-app p {
            color: var(--gray);
            margin-bottom: 15px;
            font-size: 0.95rem;
        }
        
        .app-badges {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .app-badge {
            height: 45px;
            border-radius: 8px;
            transition: transform 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        .app-badge:hover {
            transform: translateY(-3px);
        }
        
        /* Equipamentos Page */
        .equipamentos-container {
            background: rgba(30, 30, 30, 0.7);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 107, 0, 0.2);
        }
        
        .equipamentos-container h1 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: left;
        }
        
        /* Filtros */
        .filtros {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        select, input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #444;
            background: rgba(40, 40, 40, 0.8);
            color: var(--white);
            min-width: 200px;
        }
        
        /* Tabela */
        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(40, 40, 40, 0.6);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        th {
            background-color: var(--primary);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background-color: rgba(255, 107, 0, 0.05);
        }
        
        .status-barracao {
            background-color: rgba(212, 237, 218, 0.15);
            color: #d4edda;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        
        .status-outro {
            background-color: rgba(255, 243, 205, 0.15);
            color: #fff3cd;
        }
        
        /* Gerenciamento de Eventos */
        .eventos-container {
            background: rgba(30, 30, 30, 0.7);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 107, 0, 0.2);
            margin-bottom: 30px;
        }
        
        .abas {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(255, 107, 0, 0.2);
        }
        
        .aba {
            padding: 12px 25px;
            cursor: pointer;
            background: rgba(40, 40, 40, 0.6);
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
            transition: all 0.3s;
            color: var(--gray);
        }
        
        .aba.ativa {
            background: rgba(255, 107, 0, 0.3);
            color: var(--white);
        }
        
        .conteudo-aba {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .conteudo-aba.ativa {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Formulários */
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--light-gray);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #444;
            border-radius: 5px;
            font-size: 16px;
            background: rgba(40, 40, 40, 0.8);
            color: var(--white);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: 0.3s;
            margin-top: 10px;
        }
        
        .btn:hover {
            background-color: #E05E00;
            transform: translateY(-2px);
        }
        
        /* Lista de Equipamentos */
        .equipamentos-lista {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .equipamento-card {
            background: rgba(40, 40, 40, 0.8);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border: 1px solid rgba(255, 107, 0, 0.2);
            transition: all 0.3s;
        }
        
        .equipamento-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 107, 0, 0.2);
        }
        
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 15px;
        }
        
        .checkbox-container input {
            width: auto;
            margin-right: 10px;
        }
        
        /* Checklist */
        .checklist-item {
            background: rgba(40, 40, 40, 0.8);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .checklist-item:hover {
            background: rgba(50, 50, 50, 0.9);
        }
        
        .checklist-item.concluido {
            background: rgba(40, 60, 40, 0.5);
            border-color: rgba(100, 255, 100, 0.2);
        }
        
        .status {
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .status-pendente {
            background: rgba(255, 200, 100, 0.2);
            color: #FF9E00;
        }
        
        .status-concluido {
            background: rgba(100, 255, 100, 0.2);
            color: #4CAF50;
        }
        
        /* Orçamentos */
        .orcamento-container {
            background: rgba(30, 30, 30, 0.7);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 107, 0, 0.2);
            margin-bottom: 30px;
        }
        
        .orcamento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .orcamento-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .info-card {
            background: rgba(40, 40, 40, 0.8);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--primary);
        }
        
        .info-card h3 {
            color: var(--primary);
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .equipamentos-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .equipamentos-table th {
            background: rgba(255, 107, 0, 0.3);
            padding: 10px;
            text-align: left;
        }
        
        .equipamentos-table td {
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .total-orcamento {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        /* Calendário */
        .calendar-container {
            background: rgba(30, 30, 30, 0.7);
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 107, 0, 0.2);
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .calendar-nav button {
            background: rgba(255, 107, 0, 0.3);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }
        
        .calendar-day {
            background: rgba(40, 40, 40, 0.8);
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            min-height: 100px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .calendar-day:hover {
            background: rgba(50, 50, 50, 0.9);
            transform: translateY(-3px);
        }
        
        .day-header {
            font-weight: bold;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .event-item {
            background: rgba(255, 107, 0, 0.2);
            border-radius: 4px;
            padding: 5px;
            margin: 5px 0;
            font-size: 0.8rem;
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .event-item:hover {
            background: rgba(255, 107, 0, 0.3);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: rgba(30, 30, 30, 0.95);
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            border: 1px solid var(--primary);
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }
        
        /* Modal de Confirmação de Exclusão */
        .confirmation-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            display: none;
        }
        
        .confirmation-content {
            background: rgba(30, 30, 30, 0.95);
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border: 1px solid var(--danger);
            text-align: center;
        }
        
        .confirmation-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }
        
        .btn-confirm {
            background: var(--danger);
            padding: 10px 20px;
            border-radius: 5px;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }
        
        .btn-cancel {
            background: var(--gray);
            padding: 10px 20px;
            border-radius: 5px;
            color: white;
            border: none;
            cursor: pointer;
        }
        
        /* Responsivo */
        @media (max-width: 900px) {
            .main-container {
                flex-direction: column;
                padding: 20px;
            }
            
            .banner-container {
                width: 100%;
                margin-bottom: 30px;
                height: auto;
            }
            
            .form-container {
                width: 100%;
                margin-left: 0;
                max-width: 500px;
            }
            
            .sidebar {
                width: 70px;
                overflow: hidden;
            }
            
            .sidebar-header, .nav-link span {
                display: none;
            }
            
            .nav-link {
                justify-content: center;
                padding: 15px;
            }
            
            .nav-link i {
                margin-right: 0;
                font-size: 1.4rem;
            }
            
            .main-content {
                margin-left: 70px;
            }
            
            .abas {
                flex-direction: column;
            }
            
            .aba {
                border-radius: 0;
                margin-right: 0;
                margin-bottom: 2px;
            }
            
            .equipamentos-lista {
                grid-template-columns: 1fr;
            }
            
            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                font-size: 0.8rem;
            }
            
            .calendar-day {
                min-height: 80px;
                padding: 10px 5px;
            }
        }
        
        @media (max-width: 768px) {
            .filtros {
                flex-direction: column;
            }
            
            table {
                font-size: 0.9em;
            }
            
            select, input {
                min-width: 100%;
            }
            
            .topbar {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .user-info {
                margin-top: 15px;
                width: 100%;
                justify-content: space-between;
            }
            
            .orcamento-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .btn-export {
                margin-top: 15px;
            }
            
            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                font-size: 0.7rem;
            }
            
            .calendar-day {
                min-height: 70px;
                padding: 8px 3px;
            }
        }
        
        @media (max-width: 480px) {
            .form-box {
                padding: 20px;
            }
            
            .logo-header h1 {
                font-size: 2.2rem;
            }
            
            .banner-title {
                font-size: 2rem;
            }
            
            .feature {
                padding: 12px;
            }
            
            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }
            
            
            .calendar-day {
                min-height: 60px;
                padding: 5px 2px;
            }
        }
    </style>
</head>
<body>
    <!-- Página de Login -->
    <div class="login-page" id="loginPage">
        <!-- Efeitos de fundo -->
        <div class="background-effects">
            <div class="light-beam"></div>
            <div class="light-beam"></div>
            <div class="light-beam"></div>
        </div>
        
        <!-- Cabeçalho -->
        <header class="logo-header">
            <h1>TAG SOM E LUZ</h1>
            <p>Soluções profissionais em sonorização e iluminação</p>
        </header>
        
        <!-- Conteúdo Principal -->
        <div class="main-container">
            <!-- Banner/Conteúdo -->
            <div class="banner-container">
                <div class="banner-content">
                    <h2 class="banner-title">Sistema de Gerenciamento</h2>
                    
                    <div class="features">
                        <div class="feature">
                            <i class="fas fa-music"></i>
                            <div class="feature-text">
                                <h3>Controle de Equipamentos</h3>
                                <p>Gerencie seu inventário de som e iluminação com facilidade</p>
                            </div>
                        </div>
                        
                        <div class="feature">
                            <i class="fas fa-file-invoice-dollar"></i>
                            <div class="feature-text">
                                <h3>Sistema de Orçamentos</h3>
                                <p>Crie orçamentos profissionais para seus clientes</p>
                            </div>
                        </div>
                        
                        <div class="feature">
                            <i class="fas fa-calendar-alt"></i>
                            <div class="feature-text">
                                <h3>Gestão de Eventos</h3>
                                <p>Organize todos os detalhes dos seus eventos</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Formulário de Login -->
            <div class="form-container">
                <div class="form-box">
                    <div class="form-logo">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    
                    <form id="login-form">
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" name="username" placeholder="Usuário ou e-mail" required>
                        </div>
                        
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" name="password" placeholder="Senha" required>
                        </div>
                        
                        <input type="submit" value="Acessar o Sistema">
                    </form>
                    
                    
                </div>
            </div>
        </div>
    </div>
    
    <!-- Sistema Principal -->
    <div class="app-container" id="appContainer" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <div class="sidebar-logo-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <h1>Tag SL</h1>
                </div>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-page="dashboard">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="equipamentos">
                        <i class="fas fa-boxes"></i>
                        <span>Equipamentos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="eventos">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Eventos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="orcamentos">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <span>Orçamentos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="agendamento">
                        <i class="fas fa-calendar-check"></i>
                        <span>Agendamento</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-cog"></i>
                        <span>Configurações</span>
                    </a>
                </li>
            </ul>
        </div>
        
        <!-- Conteúdo Principal -->
        <div class="main-content">
            <!-- Topbar -->
            <div class="topbar">
                <div class="page-title" id="currentPageTitle">Dashboard</div>
                <div class="user-info">
                    <div class="user-avatar">AD</div>
                    <div class="user-name">Admin</div>
                    <button class="logout-btn" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
            
            <!-- Dashboard -->
            <div class="page active" id="dashboard">
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <i class="fas fa-boxes fa-2x"></i>
                        <div class="stat-value">243</div>
                        <div class="stat-label">Equipamentos</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-calendar-check fa-2x"></i>
                        <div class="stat-value">12</div>
                        <div class="stat-label">Eventos Ativos</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-file-invoice-dollar fa-2x"></i>
                        <div class="stat-value">8</div>
                        <div class="stat-label">Orçamentos</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-check-circle fa-2x"></i>
                        <div class="stat-value">86%</div>
                        <div class="stat-label">Checklists Concluídos</div>
                    </div>
                </div>
                
                <div class="equipamentos-container">
                    <h1><i class="fas fa-boxes"></i> Equipamentos Recentes</h1>
                    
                    <div class="filtros">
                        <select id="filtro-categoria">
                            <option value="">Todas Categorias</option>
                            <option value="estrutura">Estruturas</option>
                            <option value="iluminacao">Iluminação</option>
                            <option value="som">Sonorização</option>
                            <option value="controle">Controles</option>
                            <option value="acessorio">Acessórios</option>
                        </select>
                        
                        <select id="filtro-local">
                            <option value="">Todos Locais</option>
                            <option value="barracao">Barracão</option>
                            <option value="silene">Silene</option>
                            <option value="san-carlo">San Carlo</option>
                        </select>
                        
                        <input type="text" id="busca" placeholder="Pesquisar equipamento...">
                    </div>
                    
                    <table id="tabela-equipamentos">
                        <thead>
                            <tr>
                                <th>Material</th>
                                <th>Quantidade</th>
                                <th>Local</th>
                                <th>Observações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dados serão inseridos via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Página de Equipamentos -->
            <div class="page" id="equipamentos">
                <div class="equipamentos-container">
                    <h1><i class="fas fa-boxes"></i> Controle de Equipamentos</h1>
                    
                    <div class="filtros">
                        <select id="filtro-categoria2">
                            <option value="">Todas Categorias</option>
                            <option value="estrutura">Estruturas</option>
                            <option value="iluminacao">Iluminação</option>
                            <option value="som">Sonorização</option>
                            <option value="controle">Controles</option>
                            <option value="acessorio">Acessórios</option>
                        </select>
                        
                        <select id="filtro-local2">
                            <option value="">Todos Locais</option>
                            <option value="barracao">Barracão</option>
                            <option value="silene">Silene</option>
                            <option value="san-carlo">San Carlo</option>
                        </select>
                        
                        <input type="text" id="busca2" placeholder="Pesquisar equipamento...">
                    </div>
                    
                    <table id="tabela-equipamentos2">
                        <thead>
                            <tr>
                                <th>Material</th>
                                <th>Quantidade</th>
                                <th>Local</th>
                                <th>Observações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dados serão inseridos via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Página de Eventos -->
            <div class="page" id="eventos">
                <div class="eventos-container">
                    <h1><i class="fas fa-calendar-alt"></i> Gerenciamento de Eventos</h1>
                    
                    <!-- Abas -->
                    <div class="abas">
                        <div class="aba ativa" onclick="abrirAba('orcamento')">Orçamento</div>
                        <div class="aba" onclick="abrirAba('checklist')">Checklist Operacional</div>
                        <div class="aba" onclick="abrirAba('eventos-agendados')">Eventos Agendados</div>
                    </div>
                    
                    <!-- Aba Orçamento -->
                    <div id="orcamento" class="conteudo-aba ativa">
                        <h2>Novo Orçamento</h2>
                        
                        <form id="form-orcamento">
                            <div class="form-group">
                                <label for="cliente">Cliente*</label>
                                <input type="text" id="cliente" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="evento">Tipo de Evento*</label>
                                <select id="evento" required>
                                    <option value="">Selecione...</option>
                                    <option value="casamento">Casamento</option>
                                    <option value="show">Show</option>
                                    <option value="corporativo">Evento Corporativo</option>
                                    <option value="festa">Festa Particular</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="data">Data do Evento*</label>
                                <input type="date" id="data" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="local">Local*</label>
                                <input type="text" id="local" required placeholder="Endereço completo">
                            </div>
                            
                            <div class="form-group">
                                <label for="observacoes">Detalhes do Evento</label>
                                <textarea id="observacoes" placeholder="Número de convidados, horários, necessidades especiais..."></textarea>
                            </div>
                            
                            <h3>Equipamentos Necessários</h3>
                            <div class="equipamentos-lista" id="lista-equipamentos">
                                <!-- Gerado dinamicamente pelo JavaScript -->
                            </div>
                            
                            <div style="margin-top: 20px; font-size: 1.2rem;">
                                Total: R$ <span id="total-orcamento-form">0.00</span>
                            </div>
                            
                            <button type="submit" class="btn">GERAR ORÇAMENTO</button>
                        </form>
                    </div>
                    
                    <!-- Aba Checklist -->
                    <div id="checklist" class="conteudo-aba">
                        <h2>Checklist Operacional</h2>
                        
                        <div class="form-group">
                            <label for="selecionar-evento">Selecione o Evento:</label>
                            <select id="selecionar-evento" class="form-control">
                                <option value="">Carregando eventos...</option>
                            </select>
                        </div>
                        
                        <div id="detalhes-evento" style="display: none;">
                            <h3>Informações do Evento</h3>
                            <p><strong>Cliente:</strong> <span id="checklist-cliente"></span></p>
                            <p><strong>Data:</strong> <span id="checklist-data"></span></p>
                            <p><strong>Local:</strong> <span id="checklist-local"></span></p>
                            
                            <h3 style="margin-top: 30px;">Checklist de Equipamentos</h3>
                            <div id="checklist-equipamentos">
                                <!-- Gerado dinamicamente -->
                            </div>
                            
                            <div class="form-group" style="margin-top: 30px;">
                                <label for="responsavel">Responsável pela Montagem:</label>
                                <input type="text" id="responsavel" placeholder="Nome do funcionário">
                            </div>
                            
                            <button class="btn" onclick="salvarChecklist()">SALVAR CHECKLIST</button>
                        </div>
                    </div>
                    
                    <!-- Aba Eventos Agendados -->
                    <div id="eventos-agendados" class="conteudo-aba">
                        <h2>Eventos Agendados</h2>
                        <div id="lista-eventos">
                            <option value="aprovado">Aprovado</option>
                            
                            <!-- Gerado dinamicamente -->
                        </div>

                        
                    </div>
                </div>
            </div>
            
            <!-- Página de Orçamentos -->
            <div class="page" id="orcamentos">
                <div class="orcamento-container">
                    <div class="orcamento-header">
                        <h1><i class="fas fa-file-invoice-dollar"></i> Orçamentos</h1>
                        <button class="btn" onclick="novoOrcamento()">
                            <i class="fas fa-plus"></i> Novo Orçamento
                        </button>
                    </div>
                    
                    <div class="filtros">
                        <select id="filtro-status">
                            <option value="">Todos os Status</option>
                            <option value="pendente">Pendente</option>
                            <option value="aprovado">Aprovado</option>
                            <option value="recusado">Recusado</option>
                        </select>
                        
                        <input type="text" id="busca-orcamento" placeholder="Pesquisar orçamento...">
                    </div>
                    
                    <div id="lista-orcamentos">
                        <!-- Orçamentos serão carregados aqui -->
                    </div>
                    
                </div>
                
                <!-- Detalhes do Orçamento (inicialmente oculto) -->
                <div id="detalhes-orcamento" style="display: none;">
                    <div class="orcamento-container">
                        <div class="orcamento-header">
                            <h1 id="orcamento-titulo">Detalhes do Orçamento</h1>
                            <button class="btn" id="btn-export">
                                <i class="fas fa-file-pdf"></i> Exportar PDF
                            </button>
                        </div>
                        
                        <div class="orcamento-info">
                            <div class="info-card">
                                <h3>Cliente</h3>
                                <p id="orc-cliente">-</p>
                            </div>
                            
                            <div class="info-card">
                                <h3>Data do Evento</h3>
                                <p id="orc-data">-</p>
                            </div>
                            
                            <div class="info-card">
                                <h3>Local</h3>
                                <p id="orc-local">-</p>
                            </div>
                            
                            <div class="info-card">
                                <h3>Status</h3>
                                <p id="orc-status">-</p>
                            </div>
                        </div>
                        
                        <h3>Equipamentos</h3>
                        <table class="equipamentos-table">
                            <thead>
                                <tr>
                                    <th>Equipamento</th>
                                    <th>Quantidade</th>
                                    <th>Dias</th>
                                    <th>Valor Unitário</th>
                                    <th>Subtotal</th>
                                </tr>
                            </thead>
                            <tbody id="tabela-equipamentos-orc">
                                <!-- Itens serão preenchidos por JS -->
                            </tbody>
                        </table>
                        
                        <div class="total-orcamento">
                            Total: <span id="total-orcamento">R$ 0,00</span>
                        </div>
                        
                        <div style="margin-top: 30px; display: flex; gap: 15px;">
                <button class="btn" style="background: var(--success);" id="btn-aprovar">Aprovar Orçamento</button>
                <button class="btn" style="background: var(--danger);" id="btn-recusar">Recusar Orçamento</button>
                <button class="btn" style="background: var(--dark);" id="btn-deletar">
                    <i class="fas fa-trash"></i> Excluir aqui
                </button>
                <button class="btn" onclick="fecharDetalhes()">Voltar</button>
            </div>
                    </div>
                </div>
            </div>
            
            <!-- Página de Agendamento -->
            <div class="page" id="agendamento">
                <div class="eventos-container">
                    <h1><i class="fas fa-calendar-alt"></i> Agenda de Eventos</h1>
                    
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <h2 id="current-month">Junho 2024</h2>
                            <div class="calendar-nav">
                                <button id="prev-month"><i class="fas fa-chevron-left"></i></button>
                                <button id="today">Hoje</button>
                                <button id="next-month"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                        
                        <div class="calendar-grid" id="calendar-grid">
                            <!-- Dias serão gerados dinamicamente -->
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <h2>Eventos Agendados</h2>
                        <div id="eventos-lista">
                            <!-- Eventos serão listados aqui -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Evento -->
    <div class="modal" id="event-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-modal">&times;</span>
            <h2 id="modal-title">Detalhes do Evento</h2>
            
            <div class="form-group">
                <label for="event-cliente">Cliente</label>
                <input type="text" id="event-cliente" readonly>
            </div>
            
            <div class="form-group">
                <label for="event-data">Data</label>
                <input type="text" id="event-data" readonly>
            </div>
            
            <div class="form-group">
                <label for="event-local">Local</label>
                <input type="text" id="event-local" readonly>
            </div>
            
            <div class="form-group">
                <label for="event-tipo">Tipo de Evento</label>
                <input type="text" id="event-tipo" readonly>
            </div>
            
            <div class="form-group">
                <label>Equipamentos</label>
                <div id="event-equipamentos" style="max-height: 200px; overflow-y: auto; background: rgba(40,40,40,0.8); padding: 10px; border-radius: 5px;"></div>
            </div>
            
            <div class="form-group">
                <label for="event-responsavel">Responsável</label>
                <input type="text" id="event-responsavel">
            </div>
            
            <div class="form-group">
                <label for="event-observacoes">Observações</label>
                <textarea id="event-observacoes" rows="3"></textarea>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" id="btn-salvar-evento">Salvar</button>
                <button class="btn" style="background: var(--danger);" id="btn-cancelar-evento">Cancelar Evento</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmação de Exclusão -->
    <div class="confirmation-modal" id="confirmationModal">
        <div class="confirmation-content">
            <h2><i class="fas fa-exclamation-triangle" style="color: var(--warning); margin-bottom: 15px;"></i></h2>
            <h3>Confirmar Exclusão</h3>
            <p>Tem certeza que deseja excluir permanentemente este orçamento?</p>
            <p style="font-size: 0.9rem; color: var(--gray); margin-top: 10px;">Esta ação não pode ser desfeita.</p>
            
            <div class="confirmation-buttons">
                <button class="btn-cancel" id="btn-cancel-delete">Cancelar</button>
                <button class="btn-confirm" id="btn-confirm-delete">Excluir Permanentemente</button>
            </div>
        </div>
    </div>


    <!-- Modal de Confirmação de Exclusão -->
    <div class="confirmation-modal" id="confirmationModal">
        <div class="confirmation-content">
            <h2><i class="fas fa-exclamation-triangle" style="color: var(--warning); margin-bottom: 15px;"></i></h2>
            <h3>Confirmar Exclusão</h3>
            <p>Tem certeza que deseja excluir permanentemente este orçamento?</p>
            <p style="font-size: 0.9rem; color: var(--gray); margin-top: 10px;">Esta ação não pode ser desfeita.</p>
            
            <div class="confirmation-buttons">
                <button class="btn-cancel" id="btn-cancel-delete">Cancelar</button>
                <button class="btn-confirm" id="btn-confirm-delete">Excluir Permanentemente</button>
            </div>
        </div>
    </div>

    <script>
        // Banco de dados simulado
        let eventos = JSON.parse(localStorage.getItem('eventosTag')) || [
            {
                id: 1,
                cliente: "Ana Silva",
                tipoEvento: "Casamento",
                data: "2024-06-15",
                local: "Salão de Festas Jardim das Flores",
                equipamentos: [
                    { nome: "Caixa de Som JBL 15\"", quantidade: 4 },
                    { nome: "Canhão de Luz RGB 200W", quantidade: 12 }
                ],
                responsavel: "Carlos Oliveira",
                observacoes: "Cerimônia às 16h, recepção às 18h",
                status: "confirmado"
            },
            {
                id: 2,
                cliente: "Produções Musicais LTDA",
                tipoEvento: "Show de Rock",
                data: "2024-06-20",
                local: "Teatro Municipal",
                equipamentos: [
                    { nome: "Caixa de Som JBL 15\"", quantidade: 8 },
                    { nome: "Estrutura Metálica Q30", quantidade: 1 },
                    { nome: "Máquina de Fumaça", quantidade: 2 }
                ],
                responsavel: "Roberto Santos",
                observacoes: "Soundcheck às 17h",
                status: "confirmado"
            }
        ];
        let orcamentos = JSON.parse(localStorage.getItem('orcamentosTag')) || [];
        let equipamentosDisponiveis = [
            { id: 1, nome: "Caixa de Som JBL 15\"", categoria: "som", diaria: 180 },
            { id: 2, nome: "Canhão de Luz RGB 200W", categoria: "iluminacao", diaria: 120 },
            { id: 3, nome: "Microfone Sem Fio Shure", categoria: "som", diaria: 80 },
            { id: 4, nome: "Estrutura Metálica Q30", categoria: "estrutura", diaria: 300 },
            { id: 5, nome: "Mesa de Som Behringer", categoria: "som", diaria: 150 },
            { id: 6, nome: "Projetor 5000 Lumens", categoria: "projecao", diaria: 200 },
            { id: 7, nome: "Máquina de Fumaça", categoria: "efeitos", diaria: 90 }
        ];

        // Dados dos equipamentos (extraídos do PDF)
        const equipamentos = [
    { material: "Estrutura Q30", quantidade: "43m total", local: "barracão", categoria: "estrutura" },
    { material: "1 metrô", quantidade: "4", local: "barracão", categoria: "estrutura" },
    { material: "1,5 metro", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "2,5 metro", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "3 metro", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Cubos", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Pés", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Curva grande", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Curva pequenas", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Sliver", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "pal de carga", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Cinta de Sliver", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Estrutura Q20", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "1metro", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "1metro", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "0,5", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Curva grande", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Curva pequena", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Cubos", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "cubo", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Escada", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Pequena", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Grande", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Pista de LED", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "placas de LED", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "placas infinytparis", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "placas Paris", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "placas de DJ Paris", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "Placas de LED Paris", quantidade: "36", local: "barracão", categoria: "iluminacao", obs: "32 funcionando" },
    { material: "Caixas de Som", quantidade: "", local: "barracão", categoria: "som" },
    { material: "grave 18 leacs", quantidade: "", local: "barracão", categoria: "som" },
    { material: "grave 15 JBL Selenium", quantidade: "", local: "barracão", categoria: "som" },
    { material: "caixa 12 JBL Selenium master", quantidade: "", local: "barracão", categoria: "som" },
    { material: "caixa 12 JBL Selenium JBL", quantidade: "", local: "barracão", categoria: "som" },
    { material: "caixa 12 JBL Selenium master", quantidade: "", local: "barracão", categoria: "som" },
    { material: "caixa 15 JBL Selenium master", quantidade: "2", local: "barracão", categoria: "som" },
    { material: "caixa 15 transdutori", quantidade: "", local: "barracão", categoria: "som" },
    { material: "caixa de 15 passiva", quantidade: "", local: "barracão", categoria: "som" },
    { material: "graves 18 duplo", quantidade: "", local: "barracão", categoria: "som" },
    { material: "Palco", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "módulos 2x1", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "tábua 2x1", quantidade: "", local: "barracão", categoria: "estrutura" },
    { material: "Iluminação", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "canhão", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "canhão amber", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "canhão RGB", quantidade: "60", local: "barracão", categoria: "iluminacao", obs: "aproximadamente" },
    { material: "canhão RGB banda", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "canhão RGB Silene", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "luz néon", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "ribalta UV", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "lâmpada luz Negra", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "estrobo", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "estrobo de LED", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "estrobo lâmpada", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "laser", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "wale", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "wale", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "wale silene", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "movie de led", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "muvie de led", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "muvie de led", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "globos espelhados", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "caixa de madeira 30cm", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "caixas de papelão", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "globos grande", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "globos de 30cm", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "projeto", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "skypaper", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "iluminação externa/interna", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "refletores", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "refletor de led 50w", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "refletor de lâmpada P", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "refletor de lâmpada G", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "canhão lâmpada", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "HQI", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "reator HQI", quantidade: "", local: "barracão", categoria: "iluminacao" },
    { material: "pim bim", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "microfone", quantidade: "", local: "barracão", categoria: "som" },
    { material: "Mic karsect", quantidade: "", local: "barracão", categoria: "som" },
    { material: "Mic heat set", quantidade: "", local: "barracão", categoria: "som" },
    { material: "Mic AKG", quantidade: "2 base com 1 mic", local: "barracão", categoria: "som" },
    { material: "Mic com fio shure", quantidade: "", local: "barracão", categoria: "som" },
    { material: "Mic lê som", quantidade: "", local: "barracão", categoria: "som" },
    { material: "Tripé", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "pedestal", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "fumaça", quantidade: "5", local: "barracão", categoria: "acessorio" },
    { material: "infláveis", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "estrelas", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "quadrado", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "tubo", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "culer", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "mesa de iluminação", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "Control DMX512 preta", quantidade: "3", local: "barracão", categoria: "controle" },
    { material: "control dmx 512 operator", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "control dmx 512 verde", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "control 512 pista infinytparis", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "control 512 pista de led", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "control 512 azul", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "Pilot", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "mesa de som", quantidade: "", local: "barracão", categoria: "som" },
    { material: "oneal", quantidade: "", local: "barracão", categoria: "som" },
    { material: "behringer", quantidade: "", local: "barracão", categoria: "som" },
    { material: "wattsom P", quantidade: "", local: "barracão", categoria: "som" },
    { material: "wattsom G", quantidade: "", local: "barracão", categoria: "som" },
    { material: "Televisões", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "Philco 48", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "Philco 39", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "Philco 43", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "Philco 39", quantidade: "", local: "barracão", categoria: "acessorio" },
    { material: "controladora DJ", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "wego", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "ddj ergo", quantidade: "", local: "barracão", categoria: "controle" },
    { material: "xpoint", quantidade: "", local: "barracão", categoria: "controle" }
];

        // Variáveis para controle de exclusão
        let orcamentoAtualId = null; // Armazena o ID do orçamento sendo visualizado

        // Referências atuais para navegação no calendário
        let currentDate = new Date();
        let currentMonth = currentDate.getMonth();
        let currentYear = currentDate.getFullYear();
        let selectedEvent = null;

        // Nomes dos meses e dias
        const monthNames = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", 
                           "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
        const dayNames = ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"];

        // Função para carregar a tabela
        function carregarTabela(tableId, filtroCategoria = "", filtroLocal = "", busca = "") {
            const tbody = document.querySelector(`#${tableId} tbody`);
            tbody.innerHTML = "";
            
            const filtrados = equipamentos.filter(item => {
                const categoriaMatch = !filtroCategoria || item.categoria === filtroCategoria;
                const localMatch = !filtroLocal || item.local.includes(filtroLocal);
                const buscaMatch = !busca || item.material.toLowerCase().includes(busca.toLowerCase());
                
                return categoriaMatch && localMatch && buscaMatch;
            });
            
            if (filtrados.length === 0) {
                tbody.innerHTML = `<tr><td colspan="4" style="text-align:center;">Nenhum equipamento encontrado</td></tr>`;
                return;
            }
            
            filtrados.forEach(item => {
                const classeLocal = item.local === "barracão" ? "status-barracao" : "status-outro";
                
                tbody.innerHTML += `
                    <tr>
                        <td>${item.material}</td>
                        <td>${item.quantidade}</td>
                        <td><span class="${classeLocal}">${item.local}</span></td>
                        <td>${item.obs || "-"}</td>
                    </tr>
                `;
            });
        }
        
        // Login
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = this.username.value;
            const password = this.password.value;
            
            if(!username || !password) {
                alert('Por favor, preencha todos os campos!');
                return;
            }
            
            // Simulação de login
            const formBox = document.querySelector('.form-box');
            formBox.style.transform = 'scale(0.98)';
            formBox.style.boxShadow = '0 5px 20px rgba(255, 107, 0, 0.3)';
            
            setTimeout(() => {
                formBox.style.transform = '';
                formBox.style.boxShadow = '';
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('appContainer').style.display = 'flex';
                
                // Carregar dados iniciais
                carregarTabela('tabela-equipamentos');
                carregarTabela('tabela-equipamentos2');
                carregarEquipamentos();
                carregarEventosParaChecklist();
                carregarListaEventos();
                carregarOrcamentos();
                renderCalendar();
                loadEventsList();
            }, 500);
        });
        
        // Logout
        document.getElementById('logoutBtn').addEventListener('click', function() {
            document.getElementById('appContainer').style.display = 'none';
            document.getElementById('loginPage').style.display = 'block';
            document.getElementById('login-form').reset();
            orcamentoAtualId = null; // Resetar ao fazer logout
        });
        
        // Navegação
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remover classe ativa de todos os links
                document.querySelectorAll('.nav-link').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Adicionar classe ativa ao link clicado
                this.classList.add('active');
                
                // Esconder todas as páginas
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active');
                });
                
                // Mostrar a página correspondente
                const pageId = this.getAttribute('data-page');
                if (pageId) {
                    document.getElementById(pageId).classList.add('active');
                    document.getElementById('currentPageTitle').textContent = 
                        this.querySelector('span').textContent;
                        
                    // Se for a página de eventos, carregar os dados
                    if (pageId === 'eventos') {
                        abrirAba('orcamento');
                    } else if (pageId === 'orcamentos') {
                        carregarOrcamentos();
                    } else if (pageId === 'agendamento') {
                        renderCalendar();
                        loadEventsList();
                    }
                }
            });
        });
        
        // Filtros Dashboard
        document.getElementById("filtro-categoria").addEventListener("change", (e) => {
            carregarTabela('tabela-equipamentos', e.target.value, document.getElementById("filtro-local").value, document.getElementById("busca").value);
        });
        
        document.getElementById("filtro-local").addEventListener("change", (e) => {
            carregarTabela('tabela-equipamentos', document.getElementById("filtro-categoria").value, e.target.value, document.getElementById("busca").value);
        });
        
        document.getElementById("busca").addEventListener("input", (e) => {
            carregarTabela('tabela-equipamentos', document.getElementById("filtro-categoria").value, document.getElementById("filtro-local").value, e.target.value);
        });
        
        // Filtros Página de Equipamentos
        document.getElementById("filtro-categoria2").addEventListener("change", (e) => {
            carregarTabela('tabela-equipamentos2', e.target.value, document.getElementById("filtro-local2").value, document.getElementById("busca2").value);
        });
        
        document.getElementById("filtro-local2").addEventListener("change", (e) => {
            carregarTabela('tabela-equipamentos2', document.getElementById("filtro-categoria2").value, e.target.value, document.getElementById("busca2").value);
        });
        
        document.getElementById("busca2").addEventListener("input", (e) => {
            carregarTabela('tabela-equipamentos2', document.getElementById("filtro-categoria2").value, document.getElementById("filtro-local2").value, e.target.value);
        });
        
        // Efeito de hover nas features
        const features = document.querySelectorAll('.feature');
        features.forEach(feature => {
            feature.addEventListener('mouseenter', () => {
                const icon = feature.querySelector('i');
                icon.style.transform = 'scale(1.2)';
                icon.style.color = '#FF9E00';
            });
            
            feature.addEventListener('mouseleave', () => {
                const icon = feature.querySelector('i');
                icon.style.transform = '';
                icon.style.color = '#FF6B00';
            });
        });
        
        // Funções para abas de eventos
        function abrirAba(abaId) {
            document.querySelectorAll('.conteudo-aba').forEach(aba => {
                aba.classList.remove('ativa');
            });
            
            document.querySelectorAll('.aba').forEach(aba => {
                aba.classList.remove('ativa');
            });
            
            document.getElementById(abaId).classList.add('ativa');
            document.querySelector(`.aba[onclick="abrirAba('${abaId}')"]`).classList.add('ativa');
            
            if (abaId === 'checklist') {
                carregarEventosParaChecklist();
            } else if (abaId === 'eventos-agendados') {
                carregarListaEventos();
            }
        }

        // Carrega equipamentos para seleção no orçamento
        function carregarEquipamentos() {
            const container = document.getElementById('lista-equipamentos');
            container.innerHTML = '';
            
            equipamentosDisponiveis.forEach(equip => {
                container.innerHTML += `
                    <div class="equipamento-card">
                        <h4>${equip.nome}</h4>
                        <p>R$ ${equip.diaria.toFixed(2)} /dia</p>
                        <div class="checkbox-container">
                            <input type="checkbox" id="equip-${equip.id}" value="${equip.id}">
                            <label for="equip-${equip.id}">Selecionar</label>
                        </div>
                        <div class="equipment-inputs" id="inputs-equip-${equip.id}" style="display: none; margin-top: 10px;">
                            <div>
                                <label>Quantidade: 
                                    <input type="number" min="1" value="1" id="qtd-equip-${equip.id}" style="width: 60px;">
                                </label>
                            </div>
                            <div>
                                <label>Dias: 
                                    <input type="number" min="1" value="1" id="dias-equip-${equip.id}" style="width: 60px;">
                                </label>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            // Mostrar inputs quando seleciona
            document.querySelectorAll('#lista-equipamentos input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const inputsDiv = document.getElementById(`inputs-equip-${this.value}`);
                    inputsDiv.style.display = this.checked ? 'block' : 'none';
                    calcularTotalOrcamento();
                });
            });
            
            // Eventos para calcular total quando valores mudam
            document.getElementById('lista-equipamentos').addEventListener('input', function(e) {
                if (e.target.matches('input[type="number"]')) {
                    calcularTotalOrcamento();
                }
            });
        }
        
        // Calcular total do orçamento
        function calcularTotalOrcamento() {
            let total = 0;
            document.querySelectorAll('#lista-equipamentos input[type="checkbox"]:checked').forEach(checkbox => {
                const equipId = parseInt(checkbox.value);
                const qtd = parseInt(document.getElementById(`qtd-equip-${equipId}`).value) || 0;
                const dias = parseInt(document.getElementById(`dias-equip-${equipId}`).value) || 0;
                const equipamento = equipamentosDisponiveis.find(e => e.id === equipId);
                if (equipamento) {
                    total += equipamento.diaria * qtd * dias;
                }
            });
            document.getElementById('total-orcamento-form').textContent = total.toFixed(2);
        }

        // Formulário de orçamento
        document.getElementById('form-orcamento').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const dataInput = document.getElementById('data').value; // Já está no formato YYYY-MM-DD

            const equipamentosSelecionados = [];
            document.querySelectorAll('#lista-equipamentos input[type="checkbox"]:checked').forEach(checkbox => {
                const equipId = parseInt(checkbox.value);
                const qtd = parseInt(document.getElementById(`qtd-equip-${equipId}`).value);
                const dias = parseInt(document.getElementById(`dias-equip-${equipId}`).value);
                const equipamento = equipamentosDisponiveis.find(e => e.id === equipId);
                
                equipamentosSelecionados.push({
                    id: equipId,
                    nome: equipamento.nome,
                    quantidade: qtd,
                    dias: dias,
                    diaria: equipamento.diaria,
                    subtotal: equipamento.diaria * qtd * dias
                });
            });
            const novoOrcamento = {
                id: Date.now(),
                cliente: document.getElementById('cliente').value,
                evento: document.getElementById('evento').value,
                data: dataInput,
                local: document.getElementById('local').value,
                observacoes: document.getElementById('observacoes').value,
                equipamentos: equipamentosSelecionados,
                total: parseFloat(document.getElementById('total-orcamento-form').textContent),
                status: 'pendente' // status padrão
            };
            
            orcamentos.push(novoOrcamento);
            localStorage.setItem('orcamentosTag', JSON.stringify(orcamentos));
            
            alert('Orçamento criado com sucesso! ID: ' + novoOrcamento.id);
            this.reset();
            carregarEquipamentos();
            document.getElementById('total-orcamento-form').textContent = '0.00';
            
            // Ir para a página de orçamentos
            document.querySelector('.nav-link[data-page="orcamentos"]').click();
        });

        // Carrega orçamentos
        function carregarOrcamentos() {
            const container = document.getElementById('lista-orcamentos');
            container.innerHTML = '';
            
            if (orcamentos.length === 0) {
                container.innerHTML = '<p>Nenhum orçamento cadastrado ainda.</p>';
                return;
            }
            
            const filtroStatus = document.getElementById('filtro-status').value;
            const busca = document.getElementById('busca-orcamento').value.toLowerCase();
            
            const filtrados = orcamentos.filter(orc => {
                const statusMatch = !filtroStatus || orc.status === filtroStatus;
                const buscaMatch = !busca || 
                    (orc.cliente && orc.cliente.toLowerCase().includes(busca)) ||
                    (orc.evento && orc.evento.toLowerCase().includes(busca)) ||
                    (orc.local && orc.local.toLowerCase().includes(busca));
                
                return statusMatch && buscaMatch;
            });
            
            if (filtrados.length === 0) {
                container.innerHTML = '<p>Nenhum orçamento encontrado com os filtros selecionados.</p>';
                return;
            }
            
            filtrados.forEach(orc => {
                let statusClass = '';
                let statusText = '';
                
                if (orc.status === 'pendente') {
                    statusClass = 'status-pendente';
                    statusText = 'PENDENTE';
                } else if (orc.status === 'aprovado') {
                    statusClass = 'status-concluido';
                    statusText = 'APROVADO';
                } else if (orc.status === 'recusado') {
                    statusClass = 'status-recusado';
                    statusText = 'RECUSADO';
                }
                
                container.innerHTML += `
                    <div class="info-card">
                        <h3>${orc.cliente} - ${orc.evento}</h3>
                        <p><strong>Data:</strong> ${formatarData(orc.data)}</p>
                        <p><strong>Local:</strong> ${orc.local || 'Não informado'}</p>
                        <p><strong>Status:</strong> <span class="status ${statusClass}">${statusText}</span></p>
                        <p><strong>Valor:</strong> R$ ${typeof orc.total === 'number' ? orc.total.toFixed(2) : '0.00'}</p>
                        <button class="btn" style="margin-top: 10px;" onclick="visualizarOrcamento(${orc.id})">Detalhes</button>
                    </div>
                `;
            });
        }

        // Visualizar orçamento
        function visualizarOrcamento(id) {
            const orcamento = orcamentos.find(o => o.id === id);
            if (orcamento) {
                orcamentoAtualId = id; // Armazena o ID do orçamento atual
                
                document.getElementById('orcamento-titulo').textContent = `Orçamento #${orcamento.id}`;
                document.getElementById('orc-cliente').textContent = orcamento.cliente;
                document.getElementById('orc-data').textContent = formatarData(orcamento.data);
                document.getElementById('orc-local').textContent = orcamento.local;
                
                let statusText = '';
                let statusClass = '';
                if (orcamento.status === 'pendente') {
                    statusText = 'PENDENTE';
                    statusClass = 'status-pendente';
                } else if (orcamento.status === 'aprovado') {
                    statusText = 'APROVADO';
                    statusClass = 'status-concluido';
                } else {
                    statusText = 'RECUSADO';
                    statusClass = 'status-recusado';
                }
                document.getElementById('orc-status').innerHTML = `<span class="status ${statusClass}">${statusText}</span>`;
                
                const tbody = document.getElementById('tabela-equipamentos-orc');
                tbody.innerHTML = '';
                
                let total = 0;
                orcamento.equipamentos.forEach(item => {
                    const subtotal = item.diaria * item.quantidade * item.dias;
                    total += subtotal;
                    
                    tbody.innerHTML += `
                        <tr>
                            <td>${item.nome}</td>
                            <td>${item.quantidade}</td>
                            <td>${item.dias}</td>
                            <td>R$ ${item.diaria.toFixed(2)}</td>
                            <td>R$ ${subtotal.toFixed(2)}</td>
                        </tr>
                    `;
                });
                
                document.getElementById('total-orcamento').textContent = `R$ ${total.toFixed(2)}`;
                
                // Configurar botões de aprovar/recusar
                document.getElementById('btn-aprovar').onclick = function() {
                    aprovarOrcamento(orcamento.id);
                };
                
                document.getElementById('btn-recusar').onclick = function() {
                    recusarOrcamento(orcamento.id);
                };
                
                // Configurar botão de exclusão
                document.getElementById('btn-deletar').onclick = function() {
                    mostrarConfirmacaoExclusao();
                };
                
                document.getElementById('lista-orcamentos').style.display = 'none';
                document.getElementById('detalhes-orcamento').style.display = 'block';
            }
        }
        
        // Função para mostrar modal de confirmação
        function mostrarConfirmacaoExclusao() {
            if (orcamentoAtualId === null) {
                alert("Nenhum orçamento selecionado!");
                return;
            }
            console.log("ID para exclusão:", orcamentoAtualId);
            document.getElementById('confirmationModal').style.display = 'flex';
        }

        // Função para fechar modal de confirmação
        function fecharConfirmacaoExclusao() {
            document.getElementById('confirmationModal').style.display = 'none';
        }

        // Função para deletar orçamento
        function deletarOrcamento() {
            if (orcamentoAtualId === null) return;
            
            try {
                const id = Number(orcamentoAtualId);
                const orcIndex = orcamentos.findIndex(o => o.id === id);
                
                if (orcIndex === -1) {
                    throw new Error(`Orçamento não encontrado: ${id}`);
                }

                orcamentos.splice(orcIndex, 1);
                localStorage.setItem('orcamentosTag', JSON.stringify(orcamentos));
                
                fecharDetalhes();
                carregarOrcamentos();
                fecharConfirmacaoExclusao();
                
                alert('Orçamento excluído com sucesso!');
                orcamentoAtualId = null;
            } catch (error) {
                console.error("Erro na exclusão:", error);
                alert("Falha ao excluir: " + error.message);
                fecharConfirmacaoExclusao();
            }
        }

        // Fechar detalhes do orçamento
        function fecharDetalhes() {
            document.getElementById('lista-orcamentos').style.display = 'grid';
            document.getElementById('detalhes-orcamento').style.display = 'none';
            orcamentoAtualId = null;
        }

        function aprovarOrcamento(id) {
            const orc = orcamentos.find(o => o.id === id);
            if (orc) {
                orc.status = 'aprovado';
                localStorage.setItem('orcamentosTag', JSON.stringify(orcamentos));
                
                // Corrigir a data antes de adicionar o evento
                adicionarEvento({
                    ...orc,
                    data: corrigirDataParaEvento(orc.data)
                });
                
                alert('Orçamento aprovado com sucesso! Evento agendado.');
                carregarOrcamentos();
                fecharDetalhes();
            }
        }

        function corrigirDataParaEvento(dataString) {
            if (!dataString || dataString.length < 10) return dataString;
            
            const ano = dataString.substring(0, 4);
            const mes = dataString.substring(5, 7);
            const dia = dataString.substring(8, 10);
            
            // Validar se os valores são numéricos
            if (isNaN(ano) || isNaN(mes) || isNaN(dia)) return dataString;
            
            const dataLocal = new Date(parseInt(ano), parseInt(mes) - 1, parseInt(dia));
            
            // Verificar se a data é válida
            if (isNaN(dataLocal.getTime())) return dataString;
            
            const anoCorrigido = dataLocal.getFullYear();
            const mesCorrigido = String(dataLocal.getMonth() + 1).padStart(2, '0');
            const diaCorrigido = String(dataLocal.getDate()).padStart(2, '0');
            
            return `${anoCorrigido}-${mesCorrigido}-${diaCorrigido}`;
        }

        function adicionarEvento(orcamento) {
            const novoEvento = {
                id: Date.now(),
                cliente: orcamento.cliente,
                tipoEvento: orcamento.evento,
                data: orcamento.data,
                local: orcamento.local,
                equipamentos: orcamento.equipamentos.map(eq => ({
                    nome: eq.nome,
                    quantidade: eq.quantidade
                })),
                responsavel: '',
                observacoes: orcamento.observacoes,
                status: "confirmado",
                checklist: orcamento.equipamentos.map(equip => ({
                    id: equip.id,
                    nome: equip.nome,
                    quantidade: equip.quantidade,
                    carregado: false,
                    montado: false,
                    testado: false
                }))
            };
            
            eventos.push(novoEvento);
            localStorage.setItem('eventosTag', JSON.stringify(eventos));
        }
        
        function recusarOrcamento(id) {
            const orc = orcamentos.find(o => o.id == id);
            if (!orc) return;

            if (!confirm('Tem certeza que deseja recusar este orçamento?')) {
                return;
            }

            orc.status = 'recusado';
            localStorage.setItem('orcamentosTag', JSON.stringify(orcamentos));
            
            alert('Orçamento recusado com sucesso!');
            carregarOrcamentos();
            fecharDetalhes();
        }

        function carregarEventosParaChecklist() {
            const select = document.getElementById('selecionar-evento');
            select.innerHTML = '<option value="">Selecione um evento...</option>';
            
            eventos.forEach(evento => {
                const option = document.createElement('option');
                option.value = evento.id;
                option.textContent = `${evento.cliente} - ${formatarData(evento.data)} - ${evento.tipoEvento}`;
                select.appendChild(option);
            });
            
            select.addEventListener('change', function() {
                const eventoId = parseInt(this.value);
                if (!eventoId) {
                    document.getElementById('detalhes-evento').style.display = 'none';
                    return;
                }
                
                const evento = eventos.find(e => e.id === eventoId);
                if (evento) {
                    document.getElementById('checklist-cliente').textContent = evento.cliente;
                    document.getElementById('checklist-data').textContent = formatarData(evento.data);
                    document.getElementById('checklist-local').textContent = evento.local;
                    
                    const checklistContainer = document.getElementById('checklist-equipamentos');
                    checklistContainer.innerHTML = '';
                    
                    evento.equipamentos.forEach(item => {
                        checklistContainer.innerHTML += `
                            <div class="checklist-item">
                                <div>
                                    <h4>${item.nome} (x${item.quantidade})</h4>
                                    <div style="display: flex; gap: 15px; margin-top: 5px;">
                                        <label><input type="checkbox"> Carregado</label>
                                        <label><input type="checkbox"> Montado</label>
                                        <label><input type="checkbox"> Testado</label>
                                    </div>
                                </div>
                                <span class="status status-pendente">PENDENTE</span>
                            </div>
                        `;
                    });
                    
                    document.getElementById('detalhes-evento').style.display = 'block';
                }
            });
        }

        function salvarChecklist() {
            const eventoId = parseInt(document.getElementById('selecionar-evento').value);
            const responsavel = document.getElementById('responsavel').value;
            
            if (eventoId && responsavel) {
                const eventoIndex = eventos.findIndex(e => e.id === eventoId);
                if (eventoIndex !== -1) {
                    eventos[eventoIndex].responsavel = responsavel;
                    localStorage.setItem('eventosTag', JSON.stringify(eventos));
                    alert('Checklist salvo com sucesso!');
                }
            } else {
                alert('Preencha o nome do responsável!');
            }
        }

        function carregarListaEventos() {
            const container = document.getElementById('lista-eventos');
            container.innerHTML = '';
            
            if (eventos.length === 0) {
                container.innerHTML = '<p>Nenhum evento cadastrado ainda.</p>';
                return;
            }
            
            eventos.forEach(evento => {
                let statusClass = '';
                let statusText = '';
                
                if (evento.status === 'orcamento') {
                    statusClass = 'status-pendente';
                    statusText = 'ORÇAMENTO';
                } else if (evento.status === 'em_andamento') {
                    statusClass = 'status-concluido';
                    statusText = 'EM ANDAMENTO';
                } else if (evento.status === 'confirmado') {
                    statusClass = 'status-concluido';
                    statusText = 'CONFIRMADO';
                }
                
                const concluidos = evento.checklist ? evento.checklist.filter(item => item.carregado && item.montado && item.testado).length : 0;
                const total = evento.checklist ? evento.checklist.length : 0;
                
                container.innerHTML += `
                    <div class="checklist-item" style="margin-bottom: 20px;">
                        <div>
                            <h3>${evento.cliente}</h3>
                            <p><strong>Data:</strong> ${formatarData(evento.data)}</p>
                            <p><strong>Local:</strong> ${evento.local}</p>
                            <p><strong>Equipamentos:</strong> ${concluidos}/${total} concluídos</p>
                            ${evento.responsavel ? `<p><strong>Responsável:</strong> ${evento.responsavel}</p>` : ''}
                        </div>
                        <span class="status ${statusClass}">${statusText}</span>
                    </div>
                `;
            });
        }

        function formatarData(dataString) {
            if (!dataString) return '';
            const partes = dataString.split('-');
            if (partes.length === 3) {
                const [ano, mes, dia] = partes;
                return `${dia.padStart(2, '0')}/${mes.padStart(2, '0')}/${ano}`;
            }
            return dataString;
        }
        
        function novoOrcamento() {
            document.querySelector('.nav-link[data-page="eventos"]').click();
            abrirAba('orcamento');
        }

        // Calendário
        function renderCalendar() {
            const calendarGrid = document.getElementById('calendar-grid');
            calendarGrid.innerHTML = '';
            
            // Atualizar cabeçalho com mês/ano atual
            document.getElementById('current-month').textContent = 
                `${monthNames[currentMonth]} ${currentYear}`;
            
            // Criar cabeçalhos dos dias da semana
            for (let i = 0; i < 7; i++) {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-day';
                dayHeader.innerHTML = `<div class="day-header">${dayNames[i]}</div>`;
                calendarGrid.appendChild(dayHeader);
            }
            
            // Obter primeiro dia do mês e quantos dias tem o mês
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            
            // Criar dias vazios para o início do mês
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Criar os dias do mês
            const today = new Date();
            const currentDay = today.getDate();
            const currentMonthToday = today.getMonth();
            const currentYearToday = today.getFullYear();
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                // Destacar o dia atual
                const isToday = day === currentDay && 
                                currentMonth === currentMonthToday && 
                                currentYear === currentYearToday;
                
                dayElement.innerHTML = `
                    <div class="day-header ${isToday ? 'today' : ''}">${day}</div>
                    <div class="day-events" id="events-${day}"></div>
                `;
                
                calendarGrid.appendChild(dayElement);
                
                // Adicionar eventos a este dia, se houver
                const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                addEventsToDay(day, dateStr);
            }
        }

        function addEventsToDay(day, dateStr) {
            // Formatar a data do calendário para YYYY-MM-DD
            const formattedDay = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            
            const dayEvents = eventos.filter(event => event.data === formattedDay);
            
            const eventsContainer = document.getElementById(`events-${day}`);
            
            if (!eventsContainer) return;
            
            eventsContainer.innerHTML = '';
            
            dayEvents.forEach(event => {
                const eventElement = document.createElement('div');
                eventElement.className = 'event-item';
                eventElement.textContent = `${event.cliente} - ${event.tipoEvento}`;
                eventElement.dataset.eventId = event.id;
                
                eventElement.addEventListener('click', function() {
                    openEventModal(event.id);
                });
                
                eventsContainer.appendChild(eventElement);
            });
        }

        function loadEventsList() {
            const eventosLista = document.getElementById('eventos-lista');
            eventosLista.innerHTML = '';
            
            if (eventos.length === 0) {
                eventosLista.innerHTML = '<p>Nenhum evento agendado</p>';
                return;
            }
            
            // Ordenar eventos por data
            eventos.sort((a, b) => new Date(a.data) - new Date(b.data));
            
            eventos.forEach(event => {
                // Usar a função formatarData em vez de toLocaleDateString
                const formattedDate = formatarData(event.data);
                
                const eventElement = document.createElement('div');
                eventElement.className = 'checklist-item';
                eventElement.innerHTML = `
                    <div>
                        <h3>${event.cliente} - ${event.tipoEvento}</h3>
                        <p><strong>Data:</strong> ${formattedDate}</p>
                        <p><strong>Local:</strong> ${event.local}</p>
                        <p><strong>Responsável:</strong> ${event.responsavel || 'A definir'}</p>
                    </div>
                    <span class="status status-concluido">CONFIRMADO</span>
                `;
                
                eventElement.addEventListener('click', function() {
                    openEventModal(event.id);
                });
                
                eventosLista.appendChild(eventElement);
            });
        }

        function openEventModal(eventId) {
            const event = eventos.find(e => e.id === eventId);
            if (!event) return;
            
            selectedEvent = event;
            
            const eventDate = new Date(event.data);
            const formattedDate = formatarData(event.data);

            document.getElementById('modal-title').textContent = `Evento #${event.id}`;
            document.getElementById('event-cliente').value = event.cliente;
            document.getElementById('event-data').value = formattedDate;
            document.getElementById('event-local').value = event.local;
            document.getElementById('event-tipo').value = event.tipoEvento;
            document.getElementById('event-responsavel').value = event.responsavel || '';
            document.getElementById('event-observacoes').value = event.observacoes || '';
            document.getElementById('btn-cancelar-evento').onclick = cancelEvent;
            // Listar equipamentos
            const equipamentosContainer = document.getElementById('event-equipamentos');
            equipamentosContainer.innerHTML = '';
            
            event.equipamentos.forEach(equip => {
                const equipElement = document.createElement('div');
                equipElement.textContent = `${equip.nome} (x${equip.quantidade})`;
                equipamentosContainer.appendChild(equipElement);
            });
            
            document.getElementById('event-modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('event-modal').style.display = 'none';
            selectedEvent = null;
        }

        function saveEvent() {
            if (!selectedEvent) return;
            
            selectedEvent.responsavel = document.getElementById('event-responsavel').value;
            selectedEvent.observacoes = document.getElementById('event-observacoes').value;
            
            localStorage.setItem('eventosTag', JSON.stringify(eventos));
            closeModal();
            renderCalendar();
            loadEventsList();
            
            alert('Evento atualizado com sucesso!');
        }

        function cancelEvent() {
            // Verifica se há um evento selecionado
            if (!selectedEvent) {
                alert('Nenhum evento selecionado!');
                return;
            }
            
            // Solicita confirmação do usuário
            if (!confirm(`Tem certeza que deseja cancelar o evento "${selectedEvent.cliente}"?`)) {
                return;
            }

            try {
                // Encontra o índice do evento no array
                const eventIndex = eventos.findIndex(e => e.id === selectedEvent.id);
                
                // Verifica se o evento foi encontrado
                if (eventIndex === -1) {
                    throw new Error('Evento não encontrado no sistema');
                }

                // Remove o evento do array
                eventos.splice(eventIndex, 1);
                
                // Atualiza o localStorage
                localStorage.setItem('eventosTag', JSON.stringify(eventos));
                
                // Fecha o modal
                closeModal();
                
                // Atualiza a interface
                renderCalendar();
                loadEventsList();
                carregarListaEventos();
                
                // Feedback ao usuário
                alert('Evento cancelado com sucesso!');
            } catch (error) {
                console.error('Erro ao cancelar evento:', error);
                alert(`Falha ao cancelar evento: ${error.message}`);
            }
        }

        // Inicialização do calendário e eventos
        document.addEventListener('DOMContentLoaded', function() {
            // Event listeners para navegação no calendário
            document.getElementById('prev-month').addEventListener('click', function() {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar();
            });
            
            document.getElementById('next-month').addEventListener('click', function() {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar();
            });
            
            document.getElementById('today').addEventListener('click', function() {
                const today = new Date();
                currentMonth = today.getMonth();
                currentYear = today.getFullYear();
                renderCalendar();
            });
            
            // Event listeners para o modal
            document.getElementById('close-modal').addEventListener('click', closeModal);
            document.getElementById('btn-salvar-evento').addEventListener('click', saveEvent);
            document.getElementById('btn-cancelar-evento').addEventListener('click', cancelEvent);
            
            // Event listeners para o modal de confirmação de exclusão
            document.getElementById('btn-confirm-delete').addEventListener('click', deletarOrcamento);
            document.getElementById('btn-cancel-delete').addEventListener('click', fecharConfirmacaoExclusao);
        });
    </script>
</body>
</html>